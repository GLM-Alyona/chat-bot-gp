{"version":3,"file":"main.js","mappings":"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","sources":["webpack://chat-bot-gp/webpack/bootstrap","webpack://chat-bot-gp/./src/js/utils/element.js","webpack://chat-bot-gp/webpack/runtime/publicPath","webpack://chat-bot-gp/./src/js/components/icons.js","webpack://chat-bot-gp/./src/js/components/Message.js","webpack://chat-bot-gp/./src/js/utils/textfilter.js","webpack://chat-bot-gp/./src/js/utils/createMessageBody.js","webpack://chat-bot-gp/./src/js/components/Chatbot.js","webpack://chat-bot-gp/./src/js/utils/changeHandler.js","webpack://chat-bot-gp/./src/js/utils/dragndrop.js","webpack://chat-bot-gp/./src/js/components/constants.js","webpack://chat-bot-gp/./src/js/components/Loader.js","webpack://chat-bot-gp/./src/js/components/AddFilePopup.js","webpack://chat-bot-gp/./src/js/utils/bytesToSIze.js","webpack://chat-bot-gp/./src/js/components/botdata.js","webpack://chat-bot-gp/./src/js/utils/resize.js","webpack://chat-bot-gp/./src/js/utils/sendMessage.js","webpack://chat-bot-gp/./src/js/components/AudioVideoRecorder.js","webpack://chat-bot-gp/./src/js/app.js","webpack://chat-bot-gp/./src/js/utils/createPinned.js","webpack://chat-bot-gp/./src/js/utils/getPosition.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// создание DOM-элемента\n\nexport default function element(tagname, classname = '', content = '') {\n  const el = document.createElement(tagname);\n  el.className = classname;\n  if (content) el.textContent = content;\n  return el;\n}\n","__webpack_require__.p = \"\";","import fileIcon from '../../img/icons/file.svg';\nimport imageIcon from '../../img/icons/file-image.svg';\nimport audioIcon from '../../img/icons/file-audio.svg';\nimport videoIcon from '../../img/icons/file-video.svg';\n\n// иконки для типов файла\n\nconst icons = {\n  file: fileIcon,\n  image: imageIcon,\n  audio: audioIcon,\n  video: videoIcon,\n};\n\nexport default icons;\n","/* eslint-disable quotes */\n/* eslint-disable no-unused-expressions */\n/* eslint-disable class-methods-use-this */\n/* eslint-disable no-case-declarations */\n/* eslint-disable max-len */\nimport textfilter from '../utils/textfilter';\nimport element from '../utils/element';\nimport icons from './icons';\n\n// класс для обработки входящих с сервера сообщений по содержимому контенту, взаимодействие с закреплением и добавлением в избранное\n\nexport default class Message {\n  constructor(data, server) {\n    this.server = server;\n    this.id = data.id;\n    this.usertype = data.usertype;\n    this.username = data.username;\n    this.date = new Date(data.date);\n    this.content = data.content;\n    this.favorite = data.favorite;\n    this.pinned = data.pinned;\n  }\n\n  render() {\n    this.messageEl = element('li', 'messanger__message message-messanger');\n    this.messageEl.classList.add(\n      this.usertype === 'bot' ? 'bot-message' : 'user-message'\n    );\n    this.messageEl.dataset.id = this.id;\n\n    this.messageInfoEl = element('div', 'message-messanger__info');\n    this.messageAuthorEl = element(\n      'span',\n      'message-messanger__author',\n      this.usertype !== 'bot' ? 'You' : this.username\n    );\n    this.messageDateEl = element(\n      'span',\n      'message-messanger__date',\n      this.formatDate(this.date)\n    );\n    this.messageInfoEl.appendChild(this.messageAuthorEl);\n    this.messageInfoEl.appendChild(this.messageDateEl);\n\n    this.messageContentEl = element(\n      'div',\n      'message-messanger__content content'\n    );\n    this.contentMediaEl = element('div', 'content__media');\n    this.mediaImagesEl = element('div', 'content__images');\n    this.checkType(\n      this.messageContentEl,\n      this.contentMediaEl,\n      this.mediaImagesEl\n    );\n    this.messageEl.appendChild(this.messageInfoEl);\n    this.messageEl.appendChild(this.messageContentEl);\n    this.messageContentEl.appendChild(this.contentMediaEl);\n    this.contentMediaEl.appendChild(this.mediaImagesEl);\n\n    this.messagesControllers = element(\n      'div',\n      'message-messanger__controllers message-controllers'\n    );\n    this.pinBtn = element('button', 'message-controllers__pin messanger-btn');\n    this.favoriteBtn = element(\n      'button',\n      'message-controllers__favorite messanger-btn'\n    );\n    if (this.favorite) {\n      this.favoriteBtn.classList.add('added');\n    }\n    this.messagesControllers.appendChild(this.pinBtn);\n    this.messagesControllers.appendChild(this.favoriteBtn);\n\n    this.pinBtn.addEventListener('click', () => this.pin());\n    this.favoriteBtn.addEventListener('click', () => this.addToFavorite());\n\n    this.messageEl.appendChild(this.messagesControllers);\n    ``;\n    return this.messageEl;\n  }\n\n  checkType(contentEl, mediaEl, mediaImages) {\n    this.content.forEach((el) => {\n      switch (el.type) {\n        case 'text':\n          const textEl = element('span', 'content__text');\n          textEl.innerHTML = textfilter(el.body);\n          contentEl.appendChild(textEl);\n          break;\n        case 'video':\n          const videoWrapper = element('div', 'content__video');\n          const videoEl = element('video');\n          videoEl.src = el.body;\n          videoEl.controls = true;\n          videoWrapper.appendChild(videoEl);\n          const videoLoader = element(\n            'a',\n            'content__download-btn messanger-btn'\n          );\n          videoLoader.href = el.body;\n          videoLoader.download = el.filename;\n          videoWrapper.appendChild(videoLoader);\n          mediaEl.appendChild(videoWrapper);\n          break;\n        case 'audio':\n          const audioWrapper = element('div', 'content__audio');\n          const audioTitle = element(\n            'span',\n            'content__audio-name',\n            el.filename\n          );\n          audioWrapper.appendChild(audioTitle);\n          const audioEl = element('audio');\n          audioEl.src = el.body;\n          audioEl.controls = 'true';\n          audioWrapper.appendChild(audioEl);\n          const audioLoader = element(\n            'a',\n            'content__download-btn messanger-btn'\n          );\n          audioLoader.href = el.body;\n          audioLoader.download = el.filename;\n          audioWrapper.appendChild(audioLoader);\n          mediaEl.appendChild(audioWrapper);\n          break;\n        case 'location':\n          const locationEl = element('span', 'content__location');\n          locationEl.innerHTML = `📍 Your current location - <a href=\"https://www.google.com/maps/search/?api=1&query=${el.body}\" target=\"_blank\">${el.body}</a>`;\n          contentEl.appendChild(locationEl);\n          break;\n        case 'image':\n          const imageWrapper = element('div', 'content__image');\n          const imageEl = element('img');\n          imageWrapper.appendChild(imageEl);\n          imageEl.src = el.body;\n          const imgLoader = element('a', 'content__download-btn messanger-btn');\n          imgLoader.href = el.body;\n          imgLoader.download = el.filename;\n          imageWrapper.appendChild(imgLoader);\n          mediaImages.appendChild(imageWrapper);\n          break;\n        default:\n          const fileWrapper = element('div', 'content__file');\n          const fileEl = element('img');\n          fileEl.src = icons.file;\n          fileWrapper.appendChild(fileEl);\n          const fileTitle = element('span', 'content__file-name', el.filename);\n          fileWrapper.appendChild(fileTitle);\n          const fileLoader = element('a', 'content__download-btn messanger-btn');\n          fileLoader.href = el.body;\n          fileLoader.download = el.filename;\n          fileWrapper.appendChild(fileLoader);\n          contentEl.appendChild(fileWrapper);\n      }\n    });\n  }\n\n  addToFavorite() {\n    if (this.favorite) {\n      this.favorite = false;\n      this.favoriteBtn.classList.remove('added');\n    } else {\n      this.favorite = true;\n      this.favoriteBtn.classList.add('added');\n    }\n    this.server.send(\n      JSON.stringify({\n        addToFavorite: true,\n        favorite: this.favorite,\n        id: this.messageEl.dataset.id,\n      })\n    );\n  }\n\n  pin() {\n    this.pinned = true;\n    this.server.send(\n      JSON.stringify({\n        pinMessage: true,\n        pinned: this.pinned,\n        id: this.messageEl.dataset.id,\n      })\n    );\n  }\n\n  formatDate(date) {\n    const hour = date.getHours() < 10 ? `0${date.getHours()}` : date.getHours();\n    const minute =\n      date.getMinutes() < 10 ? `0${date.getMinutes()}` : date.getMinutes();\n    const formattedDate = `${hour}:${minute}`;\n\n    return formattedDate;\n  }\n}\n","/* eslint-disable no-useless-escape */\n/* eslint-disable func-names */\n// фильтрация вводимого сообщение на наличие ссылок\n\nexport default function (str) {\n  let re = /([^\\\"=]{2}|^)((https?|ftp):\\/\\/\\S+[^\\s.,> )\\];'\\\"!?])/;\n  let subst = '$1<a href=\"$2\" target=\"_blank\">$2</a>';\n  return str.replace(re, subst);\n}\n","// создает тело сообщения, где:\n// usertype - тип юзера (бот/пользователь)\n// content - контент сообщения\n// botname - имя бота\n\nexport default function createMessageBody(usertype, content, botname = '') {\n  return JSON.stringify({\n    usertype,\n    botname,\n    content,\n    pinned: false,\n    favorite: false,\n  });\n}\n","/* eslint-disable class-methods-use-this */\nimport createMessageBody from '../utils/createMessageBody';\n\n// класс для обработки ботом входящих команд\n\nexport default class Chatbot {\n  constructor(botname, data, server) {\n    this.botname = botname;\n    this.description = `Привет! Меня зовут ${botname}. Если ты заскучал, я помогу тебе выбрать какой-нибудь зарубежный сериал или фильм и даже игру на ПК. Чтобы обратиться ко мне, начни свое сообщение со слэша (\"/\") и напиши одну из команд: \"hello\", \"bye\", \"serial\", \"film\", \"game\". Например: \"/serial\".`;\n    this.greeting = data?.greeting;\n    this.goodbye = data?.goodbye;\n    this.serials = data?.serials;\n    this.games = data?.games;\n    this.server = server;\n\n    this.greet();\n  }\n\n  reply(request) {\n    if (!/^\\//.test(request)) return;\n    let message;\n\n    switch (request) {\n      case '/hello':\n        message = createMessageBody(\n          'bot',\n          [{ type: 'text', body: this.random(this.greeting) }],\n          this.botname\n        );\n        this.server.send(message);\n        break;\n\n      case '/bye':\n        message = createMessageBody(\n          'bot',\n          [{ type: 'text', body: this.random(this.goodbye) }],\n          this.botname\n        );\n        this.server.send(message);\n        break;\n\n      case '/serial':\n        message = createMessageBody(\n          'bot',\n          [{ type: 'text', body: this.random(this.serials) }],\n          this.botname\n        );\n        this.server.send(message);\n        break;\n\n      case '/film':\n        fetch('https://kinopoiskapiunofficial.tech/api/v2.2/films', {\n          method: 'GET',\n          headers: {\n            'X-API-KEY': '2abdabef-3994-4107-8e8d-39dd2e2edcda',\n            'Content-Type': 'application/json',\n          },\n        })\n          .then((res) => res.json())\n          .then((json) => {\n            const film = this.random(json.items);\n            message = createMessageBody(\n              'bot',\n              [\n                { type: 'text', body: film.nameOriginal },\n                { type: 'image', body: film.posterUrlPreview },\n              ],\n              this.botname\n            );\n            this.server.send(message);\n          })\n          .catch((err) => {\n            throw new Error(err);\n          });\n\n        break;\n\n      case '/game':\n        message = createMessageBody(\n          'bot',\n          [{ type: 'text', body: this.random(this.games) }],\n          this.botname\n        );\n        this.server.send(message);\n        break;\n\n      default:\n        message = createMessageBody(\n          'bot',\n          [\n            {\n              type: 'text',\n              body: 'К сожалению, данная команда пока что не доступна мне. Попробуй еще раз написать точнее :)',\n            },\n          ],\n          this.botname\n        );\n\n        this.server.send(message);\n    }\n  }\n\n  greet() {\n    const message = {\n      greet: true,\n      usertype: 'bot',\n      botname: this.botname,\n      content: [{ type: 'text', body: this.description }],\n    };\n\n    this.server.send(JSON.stringify(message));\n  }\n\n  random(arr) {\n    const randomIndex = Math.floor(Math.random() * arr.length);\n    return arr[randomIndex];\n  }\n}\n","// обработчик события добавления файлов\n\nexport default function changeHandler(event, popup, eventName = 'change') {\n  const data = eventName === 'drop' ? event.dataTransfer : event.target;\n  if (!data.files.length) {\n    return;\n  }\n\n  const files = Array.from(data.files);\n  files.forEach((file) => {\n    const reader = new FileReader();\n\n    reader.onload = (ev) => {\n      const src = ev.target.result;\n\n      if (!document.querySelector('.add-file-popup')) {\n        document.body.appendChild(popup.render());\n        popup.addFile(file, src);\n      } else {\n        popup.addFile(file, src);\n      }\n    };\n\n    reader.readAsDataURL(file);\n  });\n}\n","import changeHandler from './changeHandler';\n\n// обработка событий движения мыши в области добавления файла\n\nexport default function dragndropAddListeners(target, popup) {\n  target.addEventListener('dragover', (event) => {\n    event.preventDefault();\n    const dragArea = event.currentTarget.querySelector('.droparea');\n    dragArea.classList.remove(null);\n  });\n  target.addEventListener('dragleave', (event) => {\n    const dragArea = event.currentTarget.querySelector('.droparea');\n    dragArea.classList.add(null);\n  });\n  target.addEventListener('drop', (event) => {\n    event.preventDefault();\n\n    const dragArea = event.currentTarget.querySelector('.droparea');\n    if (!dragArea) return;\n\n    changeHandler(event, popup, 'drop');\n    dragArea.classList.add(null);\n  });\n}\n","// объявление необходимых констант\n\nimport Loader from './Loader';\n\nconst messageForm = document.getElementById('message-form');\nconst typeMessageInput = document.getElementById('type-message');\nconst chatContainer = document.querySelector('.messanger__chat-container');\nconst chat = document.getElementById('chat');\nconst addFileInput = document.getElementById('add-file-input');\nconst addFileBtn = document.getElementById('add-file-btn');\nconst loader = new Loader();\nconst mediaButtons = document.querySelector('.messanger__composer-btns');\nconst mediaControllers = document.querySelector('.messanger__record-media');\nconst recAudioBtn = document.getElementById('rec-audio-btn');\nconst recVideoBtn = document.getElementById('rec-video-btn');\nconst clearMediaBtn = document.getElementById('clear-media-btn');\nconst sendMediaBtn = document.getElementById('send-media-btn');\nconst mediaTimer = document.getElementById('media-timer');\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-message');\nconst noResultAlarm = document.querySelector('.messanger__no-search');\nconst showFavoriteBtn = document.getElementById('show-favorite-btn');\nconst sendGeoBtn = document.getElementById('send-geo-btn');\n\nexport {\n  messageForm,\n  typeMessageInput,\n  chat,\n  chatContainer,\n  addFileInput,\n  addFileBtn,\n  loader,\n  mediaButtons,\n  mediaControllers,\n  recAudioBtn,\n  recVideoBtn,\n  clearMediaBtn,\n  sendMediaBtn,\n  mediaTimer,\n  searchForm,\n  searchInput,\n  noResultAlarm,\n  showFavoriteBtn,\n  sendGeoBtn,\n};\n","import element from '../utils/element';\n\n// спиннер загрузки при загрузке файлов\n\nexport default class Loader {\n  render() {\n    this.loaderEl = element('div', 'loader');\n    this.loaderEl.innerHTML = `\n  <svg version=\"1.1\" id=\"loader-1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\n     width=\"40px\" height=\"40px\" viewBox=\"0 0 50 50\" style=\"enable-background:new 0 0 50 50;\" xml:space=\"preserve\">\n  <path fill=\"#000\" d=\"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z\">\n    <animateTransform attributeType=\"xml\"\n      attributeName=\"transform\"\n      type=\"rotate\"\n      from=\"0 25 25\"\n      to=\"360 25 25\"\n      dur=\"0.6s\"\n      repeatCount=\"indefinite\"/>\n    </path>\n  </svg>`;\n    return this.loaderEl;\n  }\n}\n","/* eslint-disable class-methods-use-this */\n/* eslint-disable no-param-reassign */\nimport bytesToSize from '../utils/bytesToSIze';\nimport element from '../utils/element';\nimport changeHandler from '../utils/changeHandler';\nimport dragndropAddListeners from '../utils/dragndrop';\nimport icons from './icons';\nimport createMessageBody from '../utils/createMessageBody';\nimport { chat, loader } from './constants';\n\n// popup для добавления и отправки файлов на сервер\n\nexport default class AddFilePopup {\n  constructor(server) {\n    this.server = server;\n    this.content = [];\n  }\n\n  render() {\n    this.popup = element('div', 'add-file-popup');\n    this.popupOverlay = element('div', 'add-file-popup__overlay');\n    this.popup.appendChild(this.popupOverlay);\n\n    this.popupBody = element('div', 'add-file-popup__body');\n    this.popupOverlay.appendChild(this.popupBody);\n    dragndropAddListeners(this.popupBody, this);\n\n    this.popupFiles = element('div', 'add-file-popup__files');\n    this.popupBody.appendChild(this.popupFiles);\n\n    this.popupControllers = element('div', 'add-file-popup__controllers');\n    this.popupBody.appendChild(this.popupControllers);\n\n    this.controllersLeft = element('div', 'controllers__left');\n    this.popupControllers.appendChild(this.controllersLeft);\n\n    this.addFileBtn = element(\n      'button',\n      'controllers__add-btn popup-btn',\n      'add'\n    );\n    this.controllersLeft.appendChild(this.addFileBtn);\n\n    this.addFileInput = element('input', 'controllers__add-input null');\n    this.addFileInput.type = 'file';\n    this.addFileInput.setAttribute('multiple', true);\n    this.controllersLeft.appendChild(this.addFileInput);\n\n    this.addFileBtn.addEventListener('click', () => this.addFileInput.click());\n    this.addFileInput.addEventListener('change', (event) => {\n      changeHandler(event, this);\n      event.currentTarget.value = '';\n    });\n\n    this.controllersRight = element('div', 'controllers__right');\n    this.popupControllers.appendChild(this.controllersRight);\n    this.cancelBtn = element(\n      'button',\n      'controllers__cancel-btn popup-btn',\n      'cancel'\n    );\n    this.controllersRight.appendChild(this.cancelBtn);\n    this.cancelBtn.addEventListener('click', () => this.removeEl(this.popup));\n\n    this.sendBtn = element('button', 'controllers__send-btn popup-btn', 'send');\n    this.controllersRight.appendChild(this.sendBtn);\n    this.sendBtn.addEventListener('click', () => {\n      const message = createMessageBody('person', this.content);\n      this.server.send(message);\n      chat.appendChild(loader.render());\n      this.content = [];\n      this.removeEl(this.popup);\n    });\n\n    this.dragArea = element('div', 'add-file-popup__droparea droparea null');\n    this.dragArea.innerHTML = '<b>Drop files here</b> <br>to send them';\n    this.popupBody.appendChild(this.dragArea);\n\n    return this.popup;\n  }\n\n  addFile(file, src) {\n    if (!this.popupFiles) return;\n    console.log(file);\n\n    const fileEl = element('div', 'add-file-popup__file file');\n    const fileLeft = element('div', 'file__left');\n    fileEl.appendChild(fileLeft);\n    const fileIcon = element('img', 'file__icon');\n    fileIcon.src = this.checkFileType(file);\n\n    fileLeft.appendChild(fileIcon);\n\n    const fileInfo = element('div', 'file__info');\n    fileLeft.appendChild(fileInfo);\n\n    const fileTitle = element('div', 'file__title', file.name);\n    const fileSize = element('div', 'file__size', bytesToSize(file.size));\n    fileInfo.appendChild(fileTitle);\n    fileInfo.appendChild(fileSize);\n\n    const deleteBtn = element('button', 'file__delete-btn messanger-btn');\n    fileEl.appendChild(deleteBtn);\n    deleteBtn.addEventListener('click', async () => {\n      await this.removeEl(fileEl);\n      if (!this.popupFiles.children.length) {\n        this.cancelBtn.click();\n      }\n    });\n\n    this.popupFiles.appendChild(fileEl);\n    this.content.push({\n      type: file.type.split('/')[0],\n      body: src,\n      filename: file.name,\n    });\n  }\n\n  async removeEl(el) {\n    return new Promise((res, rej) => {\n      el.classList.toggle('removing');\n      setTimeout(() => {\n        el.remove();\n        res(true);\n      }, 400);\n    });\n  }\n\n  checkFileType(file) {\n    if (file.type.match('image')) {\n      return icons.image;\n    } if (file.type.match('audio')) {\n      return icons.audio;\n    } if (file.type.match('video')) {\n      return icons.video;\n    }\n    return icons.file;\n  }\n}\n","/* eslint-disable radix */\n// конвертирование размера файла\n\nexport default function bytesToSize(bytes) {\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n  if (!bytes) {\n    return '0 Byte';\n  }\n  const i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n  return `${Math.round(bytes / 1024 ** i)} ${sizes[i]}`;\n}\n","// данные для ответа бота на команды\n\nconst botdata = {\n  greeting: [\n    'Только тебя вспомнил, это к богатству!',\n    'Привет! Как же я тебя ждал!',\n    'Буэнос диас!',\n    'И тебе не хворать :)',\n    'Какие люди и без охраны :)',\n    'Посмотрите-ка, кто здесь?!',\n    'Что новенького?',\n    'Сколько лет, сколько зим!',\n    'Нет ничего лучше, чем встретить старого друга :)',\n    'Aloha!',\n  ],\n  goodbye: [\n    'Да прибудет с тобой сила!',\n    'Hasta la vista, baby!',\n    'Прощай!',\n    'Возвращайся, я буду рад :)',\n    'Если что, я рядом :)',\n    'До связи!',\n    'Я думаю это начало прекрасной дружбы :)',\n    'Я бы поговорил дольше, но ко мне пожаловал старый друг. Прощай!',\n    'До связи!',\n    'Только не сжигай мосты и возвращайся скорее!',\n  ],\n  serials: [\n    'Игра престолов',\n    'Половое воспитание',\n    'Локи',\n    'Острые козырьки',\n    'Видеть',\n    'Во все тяжкие',\n    'Очень странные дела',\n    'Голяк',\n    'Отбросы',\n    'Ход королевы',\n    'Пацаны',\n    '13 причин почему',\n    'Элита',\n    'Бумажный дом',\n    'Игра в кальмара',\n    'Клиника',\n    'Доктор хауc',\n    'Теория большого взрыва',\n    'Тед Лассо',\n    'Защищая Джейкоба',\n    'Дом с прислугой',\n    'Лунный рыцарь',\n    'Остаться в живых',\n    'Ведьмак',\n    'Магическая битва',\n    'Клинок, рассекающий демонов',\n    'Тетрадь смерти',\n  ],\n  games: [\n    'Dota 2',\n    'The Witcher 3',\n    '2k22',\n    'Grand Theft Auto V',\n    'God of War',\n    'Elden Ring',\n    'The Elder Scrolls V: Skyrim',\n    'Aion',\n    'Stray',\n    'Red Dead Redemption 2',\n    'Bioshock Infinite',\n    'Far Cry 3',\n    'Need for Speed: Most Wanted',\n    'Black Desert',\n    'Fortnite',\n    'Path of Exile',\n    'League of Legends',\n    'World of Warcraft',\n    'APEX Legends',\n    'Left 4 Dead',\n    'Blade & Soul',\n    'Forza Horizon 4',\n    'Destiny 2',\n    'Warframe',\n    'Death Stranding',\n  ],\n};\n\nexport default botdata;\n","/* eslint-disable no-param-reassign */\n// динамическая высота тестового поля для воода сообщения\n\nexport default function resize(target, height) {\n  target.style.height = height;\n  target.style.height = `${target.scrollHeight}px`;\n}\n","import resize from './resize';\n\n// отправка сообщения боту\n\nexport default function sendMessage(server, messageBody, bot, form, input) {\n  server.send(messageBody);\n  const messageToBot = JSON.parse(messageBody).content.find(\n    (cnt) => cnt.type === 'text'\n  );\n  bot.reply(messageToBot.body);\n  form.reset();\n  resize(input, '50px');\n}\n","/* eslint-disable class-methods-use-this */\n/* eslint-disable no-plusplus */\n/* eslint-disable no-unreachable */\nimport {\n  mediaButtons,\n  mediaControllers,\n  recAudioBtn,\n  recVideoBtn,\n  clearMediaBtn,\n  sendMediaBtn,\n  mediaTimer,\n} from './constants';\nimport element from '../utils/element';\nimport createMessageBody from '../utils/createMessageBody';\n\n// запись аудио- и видеосообщений и отправка их на сервер\n\nexport default class AudioVideoRecorder {\n  constructor(server) {\n    this.server = server;\n  }\n\n  init() {\n    recAudioBtn.addEventListener('click', () => {\n      mediaButtons.classList.add('null');\n      mediaControllers.classList.remove('null');\n      mediaControllers.classList.add('show');\n      this.audioRecorder();\n    });\n\n    recVideoBtn.addEventListener('click', () => {\n      mediaButtons.classList.add('null');\n      mediaControllers.classList.remove('null');\n      mediaControllers.classList.add('show');\n      this.audioRecorder(true);\n    });\n  }\n\n  async audioRecorder(recVideo = false) {\n    if (!navigator.mediaDevices) {\n      throw new Error(\n        'Audio and video recording are not supported by the browser.'\n      );\n      recAudioBtn.disable = true;\n      recVideoBtn.disable = true;\n      return;\n    }\n    try {\n      let save = true;\n      let time = 0;\n      let timer = null;\n\n      if (!window.MediaRecorder) {\n        throw new Error('The browser needs permission to record media.');\n        recAudioBtn.disable = true;\n        recVideoBtn.disable = true;\n        return;\n      }\n\n      recAudioBtn.disable = false;\n      recVideoBtn.disable = false;\n\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true,\n        video: recVideo,\n      });\n\n      if (recVideo) {\n        const preview = element('video', 'video-preview');\n        preview.controls = true;\n        preview.muted = 'muted';\n        preview.srcObject = stream;\n        document.body.appendChild(preview);\n        preview.play();\n      }\n\n      const recorder = new MediaRecorder(stream);\n      const chunks = [];\n\n      recorder.start();\n\n      recorder.addEventListener('start', () => {\n        timer = setInterval(() => {\n          mediaTimer.textContent = this.setTimer(time++);\n        }, 1000);\n      });\n\n      recorder.addEventListener('dataavailable', (evt) => {\n        chunks.push(evt.data);\n      });\n\n      recorder.addEventListener('stop', async () => {\n        clearInterval(timer);\n        mediaTimer.textContent = '00:00';\n        if (save) {\n          let mediaType = 'audio';\n          if (recVideo) {\n            mediaType = 'video';\n          }\n\n          const blob = new Blob(chunks, { type: `${mediaType}/mp4` });\n\n          const fr = new FileReader();\n          fr.readAsDataURL(blob);\n\n          fr.onload = () => {\n            const src = fr.result;\n\n            const message = createMessageBody('person', [\n              {\n                type: mediaType,\n                body: src,\n                filename: 'Voice message',\n              },\n            ]);\n            this.server.send(message);\n          };\n        }\n        if (recVideo) {\n          document.querySelector('.video-preview').remove();\n        }\n        mediaControllers.classList.add('null');\n        mediaButtons.classList.remove('null');\n        mediaButtons.classList.add('show');\n      });\n\n      sendMediaBtn.addEventListener('click', () => {\n        recorder.stop();\n        stream.getTracks().forEach((track) => track.stop());\n        save = true;\n      });\n\n      clearMediaBtn.addEventListener('click', () => {\n        recorder.stop();\n        stream.getTracks().forEach((track) => track.stop());\n        save = false;\n      });\n    } catch (e) {\n      throw new Error('The browser needs permission to record media.');\n      recAudioBtn.disable = true;\n      recVideoBtn.disable = true;\n    }\n  }\n\n  setTimer(time) {\n    const minutes = Math.floor(time / 60);\n    const seconds = time - minutes * 60;\n\n    return `${minutes < 10 ? `0${minutes}` : minutes}:${\n      seconds < 10 ? `0${seconds}` : seconds\n    }`;\n  }\n}\n","/* eslint-disable func-names */\n/* eslint-disable no-empty */\n/* eslint-disable no-param-reassign */\nimport Message from './components/Message';\nimport Chatbot from './components/Chatbot';\nimport AddFilePopup from './components/AddFilePopup';\nimport botdata from './components/botdata';\nimport resize from './utils/resize';\nimport changeHandler from './utils/changeHandler';\nimport dragndropAddListeners from './utils/dragndrop';\nimport createMessageBody from './utils/createMessageBody';\nimport sendMessage from './utils/sendMessage';\nimport AudioVideoRecorder from './components/AudioVideoRecorder';\nimport getPosition from './utils/getPosition';\nimport createPinned from './utils/createPinned';\n\nimport {\n  messageForm,\n  typeMessageInput,\n  chat,\n  chatContainer,\n  addFileInput,\n  addFileBtn,\n  loader,\n  searchForm,\n  searchInput,\n  noResultAlarm,\n  showFavoriteBtn,\n  sendGeoBtn,\n} from './components/constants';\n\nwindow.onload = () => {\n  [...document.forms].forEach((form) => form.reset());\n\n  const ws = new WebSocket('wss://server-chat-bot.onrender.com/ws');\n  console.log(ws);\n  let allLoaded = false;\n\n  ws.onopen = () => {\n    const botCharlie = new Chatbot('Jarvis the Bot', botdata, ws);\n    ws.send(JSON.stringify({ init: true }));\n    const appRecorder = new AudioVideoRecorder(ws);\n    appRecorder.init();\n    const addPopup = new AddFilePopup(ws);\n    let favoriteShowed = false;\n\n    ws.onmessage = (message) => {\n      if (loader.loaderEl) loader.loaderEl.remove();\n      const data = JSON.parse(message.data);\n      console.log(data);\n      if (data.search || data.init) {\n        if (!data.messages.length) {\n          noResultAlarm.classList.remove('null');\n          noResultAlarm.classList.add('show');\n        } else {\n          noResultAlarm.classList.add('null');\n          noResultAlarm.classList.remove('show');\n        }\n\n        [...chat.children].forEach((el) => el.remove());\n        data.messages.forEach((mes) => {\n          const el = new Message(mes, ws).render();\n          if (mes.content) chat.appendChild(el);\n          el.scrollIntoView({\n            behavior: 'smooth',\n            block: 'start',\n          });\n        });\n      } else if(data.lazyload) {\n        console.log(data.messages);\n        data.messages.forEach((mes) => {\n          const el = new Message(mes, ws).render();\n          if(chat.firstChild) if (mes.content) chat.insertBefore(el, chat.firstChild);\n        });\n      } else if(data.allLoaded) {\n        allLoaded = data.allLoaded;\n      } else if (data.showFavorite) {\n        if (!data.messages.length) {\n          favoriteShowed = false;\n          showFavoriteBtn.classList.remove('showed');\n          return;\n        }\n        favoriteShowed = true;\n        showFavoriteBtn.classList.add('showed');\n        [...chat.children].forEach((el) => el.remove());\n        data.messages.forEach((mes) => {\n          const el = new Message(mes, ws).render();\n          el.querySelector('.message-controllers').classList.add('null');\n          if (mes.content) chat.appendChild(el);\n          el.scrollIntoView({\n            behavior: 'smooth',\n            block: 'start',\n          });\n        });\n      } else if (data.showAll) {\n        [...chat.children].forEach((el) => el.remove());\n        data.messages.forEach((mes) => {\n          favoriteShowed = false;\n          showFavoriteBtn.classList.remove('showed');\n          const el = new Message(mes, ws).render();\n          if (mes.content) chat.appendChild(el);\n          el.scrollIntoView({\n            behavior: 'smooth',\n            block: 'start',\n          });\n        });\n      } else if (data.pinMessage) {\n        if(document.querySelector('.pinned-message')) {\n          document.querySelector('.pinned-message').remove();\n        }\n        chat.insertAdjacentElement(\n          'afterbegin',\n          createPinned(data.message, ws)\n        );\n      } else {\n        const el = new Message(data, ws).render();\n        if (data.content) chat.appendChild(el);\n        el.scrollIntoView({\n          behavior: 'smooth',\n          block: 'start',\n        });\n      }\n    };\n\n    messageForm.addEventListener('submit', function (event) {\n      event.preventDefault();\n      if (typeMessageInput.value === '') {\n        return;\n      }\n      sendMessage(\n        ws,\n        createMessageBody('person', [\n          { type: 'text', body: typeMessageInput.value },\n        ]),\n        botCharlie,\n        this,\n        typeMessageInput\n      );\n    });\n    typeMessageInput.addEventListener('keypress', function (event) {\n      if (event.key === 'Enter' && !event.shiftKey) {\n        event.preventDefault();\n        if (typeMessageInput.value === '') {\n\n        } else {\n          sendMessage(\n            ws,\n            createMessageBody('person', [\n              { type: 'text', body: typeMessageInput.value },\n            ]),\n            botCharlie,\n            this.closest('form'),\n            this\n          );\n        }\n      }\n    });\n    addFileInput.addEventListener('change', (event) => {\n      changeHandler(event, addPopup);\n      event.currentTarget.value = '';\n    });\n    typeMessageInput.addEventListener('input', (event) => {\n      resize(event.target, '50px');\n    });\n    searchForm.addEventListener('submit', (event) => {\n      event.preventDefault();\n      const request = {\n        search: true,\n        value: searchInput.value.toLowerCase(),\n      };\n      ws.send(JSON.stringify(request));\n    });\n    searchInput.addEventListener('input', function () {\n      if (this.value === '') {\n        ws.send(JSON.stringify({ init: true }));\n      }\n    });\n    addFileBtn.addEventListener('click', () => {\n      addFileInput.click();\n    });\n    showFavoriteBtn.addEventListener('click', () => {\n      if (favoriteShowed) {\n        ws.send(JSON.stringify({ showAll: true }));\n      } else {\n        ws.send(JSON.stringify({ showFavorite: true }));\n      }\n    });\n    sendGeoBtn.addEventListener('click', () => {\n      getPosition(ws);\n    });\n    chat.addEventListener('scroll', () => {\n      if(!chat.scrollTop && !allLoaded) {\n        ws.send(JSON.stringify({ init: true }));\n      }\n    });\n    dragndropAddListeners(chatContainer, addPopup);\n    document.addEventListener('dragover', (event) => event.preventDefault());\n    document.addEventListener('drop', (event) => event.preventDefault());\n  };\n};\n","// инициализирует отображение закрепленного сообщения\n\nimport element from './element';\n\nexport default function createPinned(message, server) {\n  const pinnedEl = element('div', 'messanger__pinned pinned-message');\n  const pinnedInfo = element('div', 'pinned-message__info');\n  pinnedEl.appendChild(pinnedInfo);\n\n  const pinnedTitle = element(\n    'span',\n    'pinned-message__title',\n    'Pinned message'\n  );\n  const pinnedContent = element('span', 'pinned-message__content');\n  message.content.forEach((mes) => {\n    if (mes.type === 'text') {\n      pinnedContent.textContent = `${mes.body.substr(0, 50)}...`;\n    } else if (mes.type === 'location') {\n      pinnedContent.textContent = 'Your current location';\n    } else {\n      pinnedContent.textContent = 'Message media';\n    }\n  });\n  pinnedInfo.appendChild(pinnedTitle);\n  pinnedInfo.appendChild(pinnedContent);\n\n  const closeBtn = element('button', 'pinned-message__close messanger-btn');\n  pinnedEl.appendChild(closeBtn);\n\n  pinnedEl.addEventListener('click', (event) => {\n    if (event.target === closeBtn) {\n      return;\n    }\n    document\n      .querySelector(`.message-messanger[data-id=\"${message.id}\"]`)\n      .scrollIntoView({\n        behavior: 'smooth',\n        block: 'start',\n      });\n  });\n\n  closeBtn.addEventListener('click', () => {\n    pinnedEl.remove();\n    server.send(\n      JSON.stringify({\n        unpinMessage: true,\n        pinned: false,\n        id: message.id,\n      })\n    );\n  });\n\n  return pinnedEl;\n}\n","import createMessageBody from './createMessageBody';\n\n// получение координат геопозиции и отправка тела сообщения на сервер\n\nexport default function getPosition(server) {\n  function getCoords(position) {\n    server.send(\n      createMessageBody('person', [\n        {\n          type: 'location',\n          body: `${position.coords.latitude}, ${position.coords.longitude}`,\n        },\n      ])\n    );\n  }\n  if (navigator.geolocation) {\n    navigator.geolocation.getCurrentPosition(getCoords);\n  }\n}\n"],"names":["__webpack_require__","element","tagname","classname","arguments","length","undefined","content","el","document","createElement","className","textContent","p","file","image","audio","video","Message","constructor","data","server","this","id","usertype","username","date","Date","favorite","pinned","render","messageEl","classList","add","dataset","messageInfoEl","messageAuthorEl","messageDateEl","formatDate","appendChild","messageContentEl","contentMediaEl","mediaImagesEl","checkType","messagesControllers","pinBtn","favoriteBtn","addEventListener","pin","addToFavorite","contentEl","mediaEl","mediaImages","forEach","type","textEl","innerHTML","body","replace","videoWrapper","videoEl","src","controls","videoLoader","href","download","filename","audioWrapper","audioTitle","audioEl","audioLoader","locationEl","imageWrapper","imageEl","imgLoader","fileWrapper","fileEl","icons","fileTitle","fileLoader","remove","send","JSON","stringify","pinMessage","getHours","getMinutes","createMessageBody","botname","Chatbot","description","greeting","goodbye","serials","games","greet","reply","request","test","message","random","fetch","method","headers","then","res","json","film","items","nameOriginal","posterUrlPreview","catch","err","Error","arr","Math","floor","changeHandler","event","popup","dataTransfer","target","files","Array","from","reader","FileReader","onload","ev","result","querySelector","addFile","readAsDataURL","dragndropAddListeners","preventDefault","currentTarget","dragArea","messageForm","getElementById","typeMessageInput","chatContainer","chat","addFileInput","addFileBtn","loader","loaderEl","mediaButtons","mediaControllers","recAudioBtn","recVideoBtn","clearMediaBtn","sendMediaBtn","mediaTimer","searchForm","searchInput","noResultAlarm","showFavoriteBtn","sendGeoBtn","AddFilePopup","popupOverlay","popupBody","popupFiles","popupControllers","controllersLeft","setAttribute","click","value","controllersRight","cancelBtn","removeEl","sendBtn","console","log","fileLeft","fileIcon","checkFileType","fileInfo","name","fileSize","bytes","i","parseInt","round","bytesToSize","size","deleteBtn","async","children","push","split","Promise","rej","toggle","setTimeout","match","resize","height","style","scrollHeight","sendMessage","messageBody","bot","form","input","messageToBot","parse","find","cnt","reset","AudioVideoRecorder","init","audioRecorder","recVideo","navigator","mediaDevices","save","time","timer","window","MediaRecorder","disable","stream","getUserMedia","preview","muted","srcObject","play","recorder","chunks","start","setInterval","setTimer","evt","clearInterval","mediaType","blob","Blob","fr","stop","getTracks","track","e","minutes","seconds","forms","ws","WebSocket","allLoaded","onopen","botCharlie","botdata","addPopup","favoriteShowed","onmessage","search","messages","mes","scrollIntoView","behavior","block","lazyload","firstChild","insertBefore","showFavorite","showAll","insertAdjacentElement","pinnedEl","pinnedInfo","pinnedTitle","pinnedContent","substr","closeBtn","unpinMessage","createPinned","key","shiftKey","closest","toLowerCase","geolocation","getCurrentPosition","position","coords","latitude","longitude","scrollTop"],"sourceRoot":""}